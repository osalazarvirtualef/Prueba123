ng.module("smart-table").directive("stSort",["$parse",function(e){return{restrict:"A",require:"^stTable",link:function(t,n,r,i){function h(){u++,s=ng.isFunction(o(t))?o(t):r.stSort,u%3===0&&r.stSkipNatural===undefined?(u=0,i.tableState().sort={},i.tableState().pagination.start=0,i.pipe()):i.sortBy(s,u%2===0)}var s=r.stSort,o=e(s),u=0,a=r.stClassAscent||"st-sort-ascent",f=r.stClassDescent||"st-sort-descent",l=[a,f],c;r.stSortDefault&&(c=t.$eval(r.stSortDefault)!==undefined?t.$eval(r.stSortDefault):r.stSortDefault),n.bind("click",function(){s&&t.$apply(h)}),c&&(u=r.stSortDefault==="reverse"?1:0,h()),t.$watch(function(){return i.tableState().sort},function(e){e.predicate!==s?(u=0,n.removeClass(a).removeClass(f)):(u=e.reverse===!0?2:1,n.removeClass(l[u%2]).addClass(l[u-1]))},!0)}}}]);