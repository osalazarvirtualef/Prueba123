var gulp=require("gulp"),concat=require("gulp-concat"),uglify=require("gulp-uglify"),karma=require("karma").server,jshint=require("gulp-jshint"),insert=require("gulp-insert"),stylish=require("jshint-stylish"),packageJson=require("./package.json"),pluginList=["stSearch","stSelectRow","stSort","stPagination","stPipe"],disFolder="./dist/",src=["smart-table.module","stTable"].concat(pluginList).map(function(e){return"src/"+e+".js"});src.push("src/bottom.txt"),src.unshift("src/top.txt"),gulp.task("plugins",function(){gulp.src(src).pipe(concat("smart-table.min.js")).pipe(uglify()).pipe(gulp.dest(disFolder))}),gulp.task("lint",function(){gulp.src(src).pipe(jshint()).pipe(jshint.reporter(stylish))}),gulp.task("karma-CI",function(e){var t=require("./test/karma.common.js");t.singleRun=!0,t.browsers=["PhantomJS"],t.basePath="./",karma.start(t,e)}),gulp.task("debug",function(){gulp.src(src).pipe(concat("smart-table.debug.js")).pipe(gulp.dest(disFolder))}),gulp.task("test",["karma-CI"]),gulp.task("build",["test","plugins","debug"],function(){var e=packageJson.version,t="/** \n* @version "+e+"\n* @license MIT\n*/\n";gulp.src(disFolder+"*.js").pipe(insert.prepend(t)).pipe(gulp.dest(disFolder))});