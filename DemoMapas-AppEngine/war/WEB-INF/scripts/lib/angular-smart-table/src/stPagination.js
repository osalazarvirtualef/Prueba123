ng.module("smart-table").directive("stPagination",function(){return{restrict:"EA",require:"^stTable",scope:{stItemsByPage:"=?",stDisplayedPages:"=?",stPageChange:"&"},templateUrl:function(e,t){return t.stTemplate?t.stTemplate:"template/smart-table/pagination.html"},link:function(e,t,n,r){function i(){var t=r.tableState().pagination,n=1,i,s,o=e.currentPage;e.currentPage=Math.floor(t.start/t.number)+1,n=Math.max(n,e.currentPage-Math.abs(Math.floor(e.stDisplayedPages/2))),i=n+e.stDisplayedPages,i>t.numberOfPages&&(i=t.numberOfPages+1,n=Math.max(1,i-e.stDisplayedPages)),e.pages=[],e.numPages=t.numberOfPages;for(s=n;s<i;s++)e.pages.push(s);o!==e.currentPage&&e.stPageChange({newPage:e.currentPage})}e.stItemsByPage=e.stItemsByPage?+e.stItemsByPage:10,e.stDisplayedPages=e.stDisplayedPages?+e.stDisplayedPages:5,e.currentPage=1,e.pages=[],e.$watch(function(){return r.tableState().pagination},i,!0),e.$watch("stItemsByPage",function(t,n){t!==n&&e.selectPage(1)}),e.$watch("stDisplayedPages",i),e.selectPage=function(t){t>0&&t<=e.numPages&&r.slice((t-1)*e.stItemsByPage,e.stItemsByPage)},r.tableState().pagination.number||r.slice(0,e.stItemsByPage)}}});